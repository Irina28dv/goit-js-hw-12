import{S as F,a as N,i as w}from"./assets/vendor-b0e94dfd.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();const L=document.querySelector(".form"),b=document.querySelector(".js-gallery-grid"),v=document.querySelector(".loader"),d=document.querySelector(".js-load-more-btn");let R=new F(".gallery-grid a",{captionsData:"alt"});L.addEventListener("submit",V);d.addEventListener("click",E);let u=1,g,S=0,h=!1;async function V(o){var t;if(o.preventDefault(),q(),b.innerHTML="",g=o.target.elements.query.value.trim(),!g){i(),y("Search field is empty");return}try{u=1;const e=await M();if((t=e==null?void 0:e.hits)!=null&&t.length){i(),S=Math.ceil(e.totalHits/15),B(),O(e.hits),I(),j(),k();return}throw Error("Sorry, there are no images matching your search query. Please try again!")}catch(e){i(),y(typeof e=="string"?e:"Something went wrong, sorry!")}L.reset()}async function E(o){var t;if(!h){h=!0,q(),p();try{u+=1;const e=await M();(t=e==null?void 0:e.hits)!=null&&t.length?(i(),B(),O(e.hits)):p()}catch(e){i(),y(typeof e=="string"?e:"Something went wrong, sorry!")}finally{h=!1}L.reset()}}function B(){S!==u?I():(p(),z("We're sorry, but you've reached the end of search results."))}function q(){v.classList.remove("hidden")}function i(){v.classList.add("hidden")}function I(){d.classList.remove("hidden")}function p(){d.classList.add("hidden")}async function M(){return(await N.get("https://pixabay.com/api/",{params:{key:"42317586-b983a1ee46e38e925d954d84d",q:g,image_type:"photo",orientation:"horizontal",safeSearch:!0,page:u,per_page:15}})).data}function O(o){const t=document.createDocumentFragment();o.forEach(({webformatURL:e,largeImageURL:a,tags:r,likes:n,views:s,comments:x,downloads:P})=>{const c=document.createElement("a");c.href=a,c.classList.add("gallery-card");const m=document.createElement("img");m.src=e,m.alt=r;const f=document.createElement("div");f.classList.add("img-details-box");const C=l("Likes",n),D=l("Views",s),H=l("Comments",x),T=l("Downloads",P);f.append(C,D,H,T),c.append(m,f),t.appendChild(c)}),b.appendChild(t),R.refresh()}function l(o,t){const e=document.createElement("p");return e.classList.add("detail-item"),e.innerHTML=`<b>${o}:</b> ${t}`,e}function j(){new IntersectionObserver(t=>{t.forEach(e=>{e.isIntersecting&&E()})},{rootMargin:"0px",threshold:.2}).observe(d)}function k(){var t;const o=((t=document.querySelector(".gallery-card"))==null?void 0:t.getBoundingClientRect().height)||0;window.scrollBy({top:o*2,behavior:"smooth"})}function y(o){w.error({message:o,position:"topRight"})}function z(o){w.info({message:o,position:"topRight"})}
//# sourceMappingURL=commonHelpers.js.map
